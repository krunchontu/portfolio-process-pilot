# <!-- Powered by BMADT Core -->

# Story 4.7: Surface Env Validation and Setup in Docs

## Status
Draft

## Story
**As a** developer setting up the project,
**I want** clear, prominent steps to configure and validate environment variables,
**So that** my local environment works reliably with fewer setup errors.

## Acceptance Criteria
1. `docs/DEVELOPMENT_SETUP.md` includes a prominent "Run setup & validate environment" step for the backend (`npm run setup` and/or env validation) with expected outputs.
2. Quick verify steps are documented: hitting `/health` and `/api` endpoints and seeing expected responses.
3. `.env.example` and `.env.baas.example` are referenced with guidance on selecting a DB provider and required variables.
4. A short troubleshooting note links to `docs/ENVIRONMENT_VARIABLES.md` (anchors: `#variable-categories`, `#complete-variable-reference`) and common validation errors.
5. The process requires no network access beyond local server calls.

## Tasks / Subtasks
- [ ] Add setup/validation step (AC: 1)
  - [ ] Document running `cd backend && npm run setup` (or `node src/config/env-validation.js` if direct)
  - [ ] Include a note on expected success message (e.g., “Environment validation passed”)
- [ ] Add quick verify steps (AC: 2)
  - [ ] Document navigating to `http://localhost:5000/health` and `http://localhost:5000/api`
  - [ ] Mention expected JSON shape or redirect for docs (example: `{ success: true, data: { status: "healthy" } }`)
- [ ] Reference env templates (AC: 3)
  - [ ] Link `backend/.env.example` and `backend/.env.baas.example`
  - [ ] Briefly explain choosing `DB_PROVIDER` and minimum JWT secrets length (>= 32 chars per validator)
- [ ] Troubleshooting section (AC: 4, 5)
  - [ ] Link to `docs/ENVIRONMENT_VARIABLES.md#variable-categories` and `docs/ENVIRONMENT_VARIABLES.md#complete-variable-reference`
  - [ ] Add typical validation failure messages and fixes
- [ ] Verification (AC: 1–5)
  - [ ] Ensure the updated doc can be followed on a clean machine to a working `/health` response

## Dev Notes

### Relevant Code & Docs
- Backend env validation: `backend/src/config/env-validation.js` (used during startup)
- Backend examples: `backend/.env.example`, `backend/.env.baas.example`
- Documentation: `docs/ENVIRONMENT_VARIABLES.md`, `docs/DEVELOPMENT_SETUP.md`

### References
- [Source: docs/ENVIRONMENT_VARIABLES.md#variable-categories]
- [Source: docs/ENVIRONMENT_VARIABLES.md#complete-variable-reference]
- [Source: docs/DEVELOPMENT_SETUP.md#quick-start]

## Change Log
| Date       | Version | Description                           | Author            |
|------------|---------|---------------------------------------|-------------------|
| 2025-09-14 | 1.0     | Initial draft of Story 4.7            | Bob (Scrum Master) |

## Dev Agent Record

### Agent Model Used
N/A (Story draft)

### Debug Log References
- Planned: Screenshot/outputs of validation pass and `/health` JSON
